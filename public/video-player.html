<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cloudflare Stream Video Player</title>
  <link
    href="https://vjs.zencdn.net/7.15.4/video-js.css"
    rel="stylesheet"
  />
</head>
<body>
  <div class="video-container">
    <!-- Video.js player element -->
    <video
      id="my-video"
      class="video-js vjs-default-skin"
      controls
      preload="auto"
      width="640"
      height="264"
      data-setup="{}" 
      >
      <source id="video-source" src="https://customer-xklid2oln4a76gku.cloudflarestream.com/45a8c40f9af24ac3a83217fbfa87dc50/manifest/video.m3u8?token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImRjMDI3NDc3NTVlMmQ1NDE1ZTRmNjYzM2Q5YjU5YjBjIn0.eyJzdWIiOiI0NWE4YzQwZjlhZjI0YWMzYTgzMjE3ZmJmYTg3ZGM1MCIsImtpZCI6ImRjMDI3NDc3NTVlMmQ1NDE1ZTRmNjYzM2Q5YjU5YjBjIiwiZXhwIjoiMTcyNzc0NTE3OSIsIm5iZiI6IjE3Mjc2OTgzODAiLCJhY2Nlc3NSdWxlcyI6W3siYWN0aW9uIjoiYmxvY2siLCJ0eXBlIjoiaXAuZ2VvaXAuY291bnRyeSIsImNvdW50cnkiOlsiVVMiLCJUSCJdfSx7ImFjdGlvbiI6ImFsbG93IiwidHlwZSI6ImlwLnNyYyIsImlwIjpbIjkzLjE4NC4yMTYuMC8yNCIsIjI0MDA6Y2IwMDowOjA6MDowOjA6MC8zMiJdfSx7ImFjdGlvbiI6ImJsb2NrIiwidHlwZSI6ImFueSJ9XX0.H6FmcnjTA0lgwZXGffzo6nXlw15vdzgT7RIgQ-YtIY2IcKe1wlxi7V1-qz2m5fm4zm4Pj-sZrzpA8lBJXZ64ss8R5tpKGwyWL-6vGv1kKaGtiI21fsVSeGONE9QD9rmR2H69PUFOvEOUCsQpGLk1LqEm3hwTBya3HwSWP9omRCJBMlGHQyFduy6oWzeKqcVyXUshl_GQRGSLUBwc8YnlOuV60p1EDZthLr9J-L49Bw8gtDGSyIlKx08mntRugHgBRdUkm7DW4WkNugmOheLH_I_rmdOXIddfcgAXdhRvmworTMc2-PhU9aNMYQsbelCn82GNw-UHSiGfCOcbORpfXg" type="application/x-mpegURL" />
      Your browser does not support the video tag.
    </video>
  </div>

  <script src="https://vjs.zencdn.net/7.15.4/video.min.js"></script>
  <script>
    // ฟังก์ชันที่ใช้ในการดึง URL ของวิดีโอจาก API และตั้งค่าใน Video.js
//     async function fetchSignedVideoUrl() {
      
//       try {
//         // เรียก API ที่ NestJS สร้างขึ้นมา
//         const response = await fetch(`/video/45a8c40f9af24ac3a83217fbfa87dc50`);
//         const data = await response.json();

       
//         const videoSource = document.getElementById('video-source');
//         videoSource.src = data.signedUrl;

//         // โหลดวิดีโอใหม่เมื่อได้รับ Signed URL
//         const player = videojs('my-video');
//         player.src({ src: data.signedUrl, type: 'application/x-mpegURL' });
//         player.load();
//       } catch (error) {
//         console.error('Error fetching signed video URL:', error);
//       }
//     }

//     // เรียกใช้ฟังก์ชันเมื่อหน้าเว็บโหลดเสร็จ
//     window.onload = fetchSignedVideoUrl;
//   </script>
</body>
</html>
